{"ast":null,"code":"import _classCallCheck from \"/media/tuanla/WORK_1/2019_2/CongNgheWeb/BTL/baitaplon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/tuanla/WORK_1/2019_2/CongNgheWeb/BTL/baitaplon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/media/tuanla/WORK_1/2019_2/CongNgheWeb/BTL/baitaplon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/media/tuanla/WORK_1/2019_2/CongNgheWeb/BTL/baitaplon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/media/tuanla/WORK_1/2019_2/CongNgheWeb/BTL/baitaplon/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/media/tuanla/WORK_1/2019_2/CongNgheWeb/BTL/baitaplon/src/Component/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport OpenViduSession from 'openvidu-react';\n\nvar App = /*#__PURE__*/function (_Component) {\n  _inherits(App, _Component);\n\n  var _super = _createSuper(App);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _super.call(this, props);\n    _this.OPENVIDU_SERVER_URL = 'https://' + window.location.hostname + ':4443';\n    _this.OPENVIDU_SERVER_SECRET = 'MY_SECRET';\n    _this.state = {\n      mySessionId: 'SessionA',\n      myUserName: 'OpenVidu_User_' + Math.floor(Math.random() * 100),\n      token: undefined\n    };\n    _this.handlerJoinSessionEvent = _this.handlerJoinSessionEvent.bind(_assertThisInitialized(_this));\n    _this.handlerLeaveSessionEvent = _this.handlerLeaveSessionEvent.bind(_assertThisInitialized(_this));\n    _this.handlerErrorEvent = _this.handlerErrorEvent.bind(_assertThisInitialized(_this));\n    _this.handleChangeSessionId = _this.handleChangeSessionId.bind(_assertThisInitialized(_this));\n    _this.handleChangeUserName = _this.handleChangeUserName.bind(_assertThisInitialized(_this));\n    _this.joinSession = _this.joinSession.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"handlerJoinSessionEvent\",\n    value: function handlerJoinSessionEvent() {\n      console.log('Join session');\n    }\n  }, {\n    key: \"handlerLeaveSessionEvent\",\n    value: function handlerLeaveSessionEvent() {\n      console.log('Leave session');\n      this.setState({\n        session: undefined\n      });\n    }\n  }, {\n    key: \"handlerErrorEvent\",\n    value: function handlerErrorEvent() {\n      console.log('Leave session');\n    }\n  }, {\n    key: \"handleChangeSessionId\",\n    value: function handleChangeSessionId(e) {\n      this.setState({\n        mySessionId: e.target.value\n      });\n    }\n  }, {\n    key: \"handleChangeUserName\",\n    value: function handleChangeUserName(e) {\n      this.setState({\n        myUserName: e.target.value\n      });\n    }\n  }, {\n    key: \"joinSession\",\n    value: function joinSession(event) {\n      var _this2 = this;\n\n      if (this.state.mySessionId && this.state.myUserName) {\n        this.getToken().then(function (token) {\n          _this2.setState({\n            token: token,\n            session: true\n          });\n        });\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var mySessionId = this.state.mySessionId;\n      var myUserName = this.state.myUserName;\n      var token = this.state.token;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      }, this.state.session === undefined ? /*#__PURE__*/React.createElement(\"div\", {\n        id: \"join\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"join-dialog\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 29\n        }\n      }, \" Join a video session \"), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.joinSession,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 37\n        }\n      }, \"Participant: \"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"userName\",\n        value: myUserName,\n        onChange: this.handleChangeUserName,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 37\n        }\n      }, \" Session: \"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"sessionId\",\n        value: mySessionId,\n        onChange: this.handleChangeSessionId,\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 37\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        name: \"commit\",\n        type: \"submit\",\n        value: \"JOIN\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 37\n        }\n      }))))) : /*#__PURE__*/React.createElement(\"div\", {\n        id: \"session\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(OpenViduSession, {\n        id: \"opv-session\",\n        sessionName: mySessionId,\n        user: myUserName,\n        token: token,\n        joinSession: this.handlerJoinSessionEvent,\n        leaveSession: this.handlerLeaveSessionEvent,\n        error: this.handlerErrorEvent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }\n      })));\n    }\n    /**\n     * --------------------------\n     * SERVER-SIDE RESPONSIBILITY\n     * --------------------------\n     * These methods retrieve the mandatory user token from OpenVidu Server.\n     * This behaviour MUST BE IN YOUR SERVER-SIDE IN PRODUCTION (by using\n     * the API REST, openvidu-java-client or openvidu-node-client):\n     *   1) Initialize a session in OpenVidu Server\t(POST /api/sessions)\n     *   2) Generate a token in OpenVidu Server\t\t(POST /api/tokens)\n     *   3) The token must be consumed in Session.connect() method\n     */\n\n  }, {\n    key: \"getToken\",\n    value: function getToken() {\n      var _this3 = this;\n\n      return this.createSession(this.state.mySessionId).then(function (sessionId) {\n        return _this3.createToken(sessionId);\n      }).catch(function (Err) {\n        return console.error(Err);\n      });\n    }\n  }, {\n    key: \"createSession\",\n    value: function createSession(sessionId) {\n      var _this4 = this;\n\n      return new Promise(function (resolve, reject) {\n        var data = JSON.stringify({\n          customSessionId: sessionId\n        });\n        axios.post(_this4.OPENVIDU_SERVER_URL + '/api/sessions', data, {\n          headers: {\n            Authorization: 'Basic ' + btoa('OPENVIDUAPP:' + _this4.OPENVIDU_SERVER_SECRET),\n            'Content-Type': 'application/json'\n          }\n        }).then(function (response) {\n          console.log('CREATE SESION', response);\n          resolve(response.data.id);\n        }).catch(function (response) {\n          var error = Object.assign({}, response);\n\n          if (error.response && error.response.status === 409) {\n            resolve(sessionId);\n          } else {\n            console.log(error);\n            console.warn('No connection to OpenVidu Server. This may be a certificate error at ' + _this4.OPENVIDU_SERVER_URL);\n\n            if (window.confirm('No connection to OpenVidu Server. This may be a certificate error at \"' + _this4.OPENVIDU_SERVER_URL + '\"\\n\\nClick OK to navigate and accept it. ' + 'If no certificate warning is shown, then check that your OpenVidu Server is up and running at \"' + _this4.OPENVIDU_SERVER_URL + '\"')) {\n              window.location.assign(_this4.OPENVIDU_SERVER_URL + '/accept-certificate');\n            }\n          }\n        });\n      });\n    }\n  }, {\n    key: \"createToken\",\n    value: function createToken(sessionId) {\n      var _this5 = this;\n\n      return new Promise(function (resolve, reject) {\n        var data = JSON.stringify({\n          session: sessionId\n        });\n        axios.post(_this5.OPENVIDU_SERVER_URL + '/api/tokens', data, {\n          headers: {\n            Authorization: 'Basic ' + btoa('OPENVIDUAPP:' + _this5.OPENVIDU_SERVER_SECRET),\n            'Content-Type': 'application/json'\n          }\n        }).then(function (response) {\n          console.log('TOKEN', response);\n          resolve(response.data.token);\n        }).catch(function (error) {\n          return reject(error);\n        });\n      });\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default App;","map":{"version":3,"sources":["/media/tuanla/WORK_1/2019_2/CongNgheWeb/BTL/baitaplon/src/Component/App.js"],"names":["React","Component","axios","OpenViduSession","App","props","OPENVIDU_SERVER_URL","window","location","hostname","OPENVIDU_SERVER_SECRET","state","mySessionId","myUserName","Math","floor","random","token","undefined","handlerJoinSessionEvent","bind","handlerLeaveSessionEvent","handlerErrorEvent","handleChangeSessionId","handleChangeUserName","joinSession","console","log","setState","session","e","target","value","event","getToken","then","preventDefault","createSession","sessionId","createToken","catch","Err","error","Promise","resolve","reject","data","JSON","stringify","customSessionId","post","headers","Authorization","btoa","response","id","Object","assign","status","warn","confirm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport axios from 'axios';\nimport OpenViduSession from 'openvidu-react';\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.OPENVIDU_SERVER_URL = 'https://' + window.location.hostname + ':4443';\n        this.OPENVIDU_SERVER_SECRET = 'MY_SECRET';\n        this.state = {\n            mySessionId: 'SessionA',\n            myUserName: 'OpenVidu_User_' + Math.floor(Math.random() * 100),\n            token: undefined,\n        };\n\n        this.handlerJoinSessionEvent = this.handlerJoinSessionEvent.bind(this);\n        this.handlerLeaveSessionEvent = this.handlerLeaveSessionEvent.bind(this);\n        this.handlerErrorEvent = this.handlerErrorEvent.bind(this);\n        this.handleChangeSessionId = this.handleChangeSessionId.bind(this);\n        this.handleChangeUserName = this.handleChangeUserName.bind(this);\n        this.joinSession = this.joinSession.bind(this);\n    }\n\n    handlerJoinSessionEvent() {\n        console.log('Join session');\n    }\n\n    handlerLeaveSessionEvent() {\n        console.log('Leave session');\n        this.setState({\n            session: undefined,\n        });\n    }\n\n    handlerErrorEvent() {\n        console.log('Leave session');\n    }\n\n    handleChangeSessionId(e) {\n        this.setState({\n            mySessionId: e.target.value,\n        });\n    }\n\n    handleChangeUserName(e) {\n        this.setState({\n            myUserName: e.target.value,\n        });\n    }\n\n    joinSession(event) {\n        if (this.state.mySessionId && this.state.myUserName) {\n            this.getToken().then((token) => {\n                this.setState({\n                    token: token,\n                    session: true,\n                });\n            });\n            event.preventDefault();\n        }\n    }\n\n    render() {\n        const mySessionId = this.state.mySessionId;\n        const myUserName = this.state.myUserName;\n        const token = this.state.token;\n        return (\n            <div>\n                {this.state.session === undefined ? (\n                    <div id=\"join\">\n                        <div id=\"join-dialog\">\n                            <h1> Join a video session </h1>\n                            <form onSubmit={this.joinSession}>\n                                <p>\n                                    <label>Participant: </label>\n                                    <input\n                                        type=\"text\"\n                                        id=\"userName\"\n                                        value={myUserName}\n                                        onChange={this.handleChangeUserName}\n                                        required\n                                    />\n                                </p>\n                                <p>\n                                    <label> Session: </label>\n                                    <input\n                                        type=\"text\"\n                                        id=\"sessionId\"\n                                        value={mySessionId}\n                                        onChange={this.handleChangeSessionId}\n                                        required\n                                    />\n                                </p>\n                                <p>\n                                    <input name=\"commit\" type=\"submit\" value=\"JOIN\" />\n                                </p>\n                            </form>\n                        </div>\n                    </div>\n                ) : (\n                    <div id=\"session\">\n                        <OpenViduSession\n                            id=\"opv-session\"\n                            sessionName={mySessionId}\n                            user={myUserName}\n                            token={token}\n                            joinSession={this.handlerJoinSessionEvent}\n                            leaveSession={this.handlerLeaveSessionEvent}\n                            error={this.handlerErrorEvent}\n                        />\n                    </div>\n                )}\n            </div>\n        );\n    }\n\n    /**\n     * --------------------------\n     * SERVER-SIDE RESPONSIBILITY\n     * --------------------------\n     * These methods retrieve the mandatory user token from OpenVidu Server.\n     * This behaviour MUST BE IN YOUR SERVER-SIDE IN PRODUCTION (by using\n     * the API REST, openvidu-java-client or openvidu-node-client):\n     *   1) Initialize a session in OpenVidu Server\t(POST /api/sessions)\n     *   2) Generate a token in OpenVidu Server\t\t(POST /api/tokens)\n     *   3) The token must be consumed in Session.connect() method\n     */\n\n    getToken() {\n        return this.createSession(this.state.mySessionId)\n            .then((sessionId) => this.createToken(sessionId))\n            .catch((Err) => console.error(Err));\n    }\n\n    createSession(sessionId) {\n        return new Promise((resolve, reject) => {\n            var data = JSON.stringify({ customSessionId: sessionId });\n            axios\n                .post(this.OPENVIDU_SERVER_URL + '/api/sessions', data, {\n                    headers: {\n                        Authorization: 'Basic ' + btoa('OPENVIDUAPP:' + this.OPENVIDU_SERVER_SECRET),\n                        'Content-Type': 'application/json',\n                    },\n                })\n                .then((response) => {\n                    console.log('CREATE SESION', response);\n                    resolve(response.data.id);\n                })\n                .catch((response) => {\n                    var error = Object.assign({}, response);\n                    if (error.response && error.response.status === 409) {\n                        resolve(sessionId);\n                    } else {\n                        console.log(error);\n                        console.warn(\n                            'No connection to OpenVidu Server. This may be a certificate error at ' + this.OPENVIDU_SERVER_URL,\n                        );\n                        if (\n                            window.confirm(\n                                'No connection to OpenVidu Server. This may be a certificate error at \"' +\n                                    this.OPENVIDU_SERVER_URL +\n                                    '\"\\n\\nClick OK to navigate and accept it. ' +\n                                    'If no certificate warning is shown, then check that your OpenVidu Server is up and running at \"' +\n                                    this.OPENVIDU_SERVER_URL +\n                                    '\"',\n                            )\n                        ) {\n                            window.location.assign(this.OPENVIDU_SERVER_URL + '/accept-certificate');\n                        }\n                    }\n                });\n        });\n    }\n\n    createToken(sessionId) {\n        return new Promise((resolve, reject) => {\n            var data = JSON.stringify({ session: sessionId });\n            axios\n                .post(this.OPENVIDU_SERVER_URL + '/api/tokens', data, {\n                    headers: {\n                        Authorization: 'Basic ' + btoa('OPENVIDUAPP:' + this.OPENVIDU_SERVER_SECRET),\n                        'Content-Type': 'application/json',\n                    },\n                })\n                .then((response) => {\n                    console.log('TOKEN', response);\n                    resolve(response.data.token);\n                })\n                .catch((error) => reject(error));\n        });\n    }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}